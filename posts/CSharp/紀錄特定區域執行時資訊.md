---
title: 紀錄特定區域執行時資訊
catalog: true
comments: true
tags:
  - C#
abbrlink: 45832
categories: uncategorized
date: 2025-11-05 15:28:01
---
# 紀錄特定區域執行時資訊
## 以記錄時間為範例
```csharp
  public class CodeTimer : IDisposable
  {
      private Stopwatch _stopwatch;
      private string _label;

      public CodeTimer(string label = "")
      {
          _label = label;
          _stopwatch = Stopwatch.StartNew();
      }

      public void Dispose()
      {
          _stopwatch.Stop();
          Common.Log($"{_label} 耗時: {_stopwatch.ElapsedMilliseconds} 毫秒");
      }
  }
```
## 使用
```csharp
using (new CodeTimer("Code1"))
{
  //do something
}
```
他就會將執行消耗的時間寫到log中，可以調整一下拿來記錄記憶體使用量或是指定reference type變數的值